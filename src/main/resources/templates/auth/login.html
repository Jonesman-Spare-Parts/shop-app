<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">
<span th:replace="~{fragments/head :: head}"></span>
<body>
<div class="notification has-text-centered	 is-primary is-light" th:if="${param.success}">
    <button class="delete"></button>
    You've succesfully submited your signup form . The <strong>Adminstrator </strong> will review your
    information and admit you into Jonesuman system
</div>
<div class="hero is-fullheight">
    <div class="is-flex is-justify-content-center p-4	 "><h1 class="title  has-text-weight-bold"> Welcome to <span
            class="is-primary">  JONESUMAN</span> SHOP</h1></div>
    <div class="hero-body is-justify-content-center is-align-items-center">
        <form action="#" id="form" method="post" th:action="@{/auth/login}">
              <span class="message is-danger" th:if="${param.error}">
              <div class="message-body">
                  Invalid username or password.
              </div>
            </span>
            <span class="message is-danger" th:if="${param.error}">
              <div class="message-body">
                  You have been logged out
              </div>
            </span>
            <div class="columns is-flex is-flex-direction-column box">
                
                <div class="column">
                    <label for="username">Username </label>
                    <input class="input " id="username" name="username" placeholder="Auto Generated Username"
                           type="text">
                </div>
                
                <div class="column">
                    <label for="password">Password</label>
                    <input autofocus="autofocus" class="input " id="password" name="password" placeholder="Password"
                           type="password">
                
                </div>
                <div class="column">
                    <input class="button is-primary is-fullwidth" type="submit" value="Log In"/>
                </div>
                <div class="has-text-centered">
                    <p> Dont have an account? <a class="has-text-info" href="#" th:href="@{/auth/signup}">Signup</a>
                    </p>
                </div>
            </div>
        </form>
    </div>
</div>

<script th:inline="javascript">
    
    var formEl = document.forms.form;
    var formData = new FormData(formEl);
    
    let userName = document.getElementById("userName");
    let firstName = document.getElementById("firstName")
    
    function updateUsernameInput() {
        console.log("keyup", formData.get("userName"))
        userName.value = firstName.value
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
            const $notification = $delete.parentNode;
            
            $delete.addEventListener('click', () => {
                $notification.parentNode.removeChild($notification);
            });
        });
    });
</script>
</body>
</html>
