<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">
<span th:replace="~{fragments/head :: head}"></span>
<body>
<div class="notification has-text-centered	 is-primary is-light" th:if="${param.success}">
    <button class="delete"></button>
    You've succesfully submited your signup form . The <strong>Adminstrator </strong> will review your
    information and admit you into Jonesuman system
</div>
<div class="hero is-fullheight">
    <div class="is-flex is-justify-content-center p-4	 "><h1 class="title  has-text-weight-bold"> Welcome to <span
            class="is-primary">  JONESUMAN</span> SHOP</h1></div>
    <div class="hero-body is-justify-content-center is-align-items-center">
        <form action="#" id="form" method="post" th:action="@{/auth/signup}" th:object="${users}">
            <div class="columns is-flex is-flex-direction-column box">
                <div class="column">
                    <label for="firstName">First Name</label>
                    <input autofocus="autofocus" class="input " id="firstName" placeholder="Enter First Name"
                           required th:field="*{firstName}" th:onkeyup="updateUsernameInput()" type="text"
                           value>
                </div>
                <div class="column">
                    <label for="lastName">Last Name</label>
                    <input autofocus="autofocus" class="input " id="lastName" placeholder="Enter Last Name" required
                           th:field="*{lastName}" type="text" value="aaaa">
                </div>
                <div class="column">
                    <label for="userName">Username (<em>Auto Generated</em>)</label>
                    <input class="input " disabled id="userName" placeholder="Auto Generated Username" type="text"
                           value="">
                </div>
                <div class="column">
                    <label for="telephone">Telephone</label>
                    <input autofocus="autofocus" class="input " id="telephone" placeholder="Email address" required
                           th:field="*{telephone}" type="tel">
                </div>
                <div class="column">
                    <label for="email">Email (<em>Optional</em>)</label>
                    <input autofocus="autofocus" class="input " id="email" placeholder="Email address" th:field="*{email}"
                           type="text">
                </div>
                <div class="column">
                    <label for="password">Password</label>
                    <input autofocus="autofocus" class="input " id="password" placeholder="Password" required
                           th:field="*{password}" type="password">
                
                </div>
                <div class="column">
                    <input class="button is-primary is-fullwidth" th:onclick="updateUsernameInput()"
                           type="submit" value="Create an account"/>
                </div>
                <div class="has-text-centered">
                    <p> Already have an account? <a class="has-text-info" href="#" th:href="@{/auth/login}">Login</a>
                    </p>
                </div>
            </div>
        </form>
    </div>
</div>

<script th:inline="javascript">
    
    var formEl = document.forms.form;
    var formData = new FormData(formEl);
    
    let userName = document.getElementById("userName");
    let firstName = document.getElementById("firstName")
    
    function updateUsernameInput() {
        console.log("keyup", formData.get("userName"))
        userName.value = firstName.value
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
            const $notification = $delete.parentNode;
            
            $delete.addEventListener('click', () => {
                $notification.parentNode.removeChild($notification);
            });
        });
    });
</script>
</body>
</html>
